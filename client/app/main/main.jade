.container.min-height-100pc
  // Fixed-position
  .sidepane
    .header-full
      .header-carousel
        // Dissolving Carousel
        .image-container
          .img-dummy
          img(ng-repeat="image in carouselImages", ng-src="{{image}}", ng-class="{show: $index==currentImageIndex}")
        // Audio player
        .sidepane-container.audio-container.margin-top
          .widget-control(ng-click="togglePlaying()", ng-class="{playing: playing}")
            div(ng-hide="playing")
              span.glyphicon.glyphicon-volume-up.spacer-right.valign-middle
              span.valign-middle Listen
            div(ng-show="playing")
              span.glyphicon.glyphicon-volume-off.spacer-right.valign-middle
              span.valign-middle Stop listening
          .sidebar-section-fade.listen-display.margin-top-sm(ng-class="{playing: playing}")
            span.listen-track-button.glyphicon.glyphicon-step-backward.spacer-right.valign-middle.pull-left(ng-click="previousTrack()", ng-disabled="!playing")
            span(ng-hide="playing") No track selected
            //span {{currentTrack.composer}} - {{currentTrack.title}} ({{currentTrack.instrument}})
            marquee(ng-show="playing", behavior="scroll",direction="left") {{currentTrack.composer}} - {{currentTrack.title}} ({{currentTrack.instrument}})
            span.listen-track-button.glyphicon.glyphicon-step-forward.spacer-right.valign-middle.pull-right(ng-click="nextTrack()", ng-disabled="!playing")
          div(ng-repeat="track in tracks") {{track.path}}
          audio(media-player="audio", playlist="tracks")
          .track-list(ng-show="showTrackList")
            .track-item(ng-repeat="track in tracks", ng-click="playTrack($index)", ng-class="{playing: playing && currentTrackIndex==$index}")
              span.glyphicon.glyphicon-volume-up.margin-right.valign-middle.track-item-icon
              span.track-item-text {{track.composer}} - {{track.title}} ({{track.instrument}})
          .widget-control.font-sm.align-center.margin-top-sm
            div(ng-click="showTrackList=!showTrackList")
              span(ng-show="!showTrackList") View all tracks
              span(ng-show="showTrackList") Hide tracks

        // (ng-if="upcomingEvents && upcomingEvents.length")
        .sidepane-container.events-container(ng-if="upcomingEvents.length")
          .events-container-header
            span.glyphicon.glyphicon-calendar.spacer-right.valign-middle
            span.valign-middle Upcoming events
          .event-list
            .event-item(ng-repeat="event in upcomingEvents")
              a(href="{{event.link}}", target="_blank")
                .event-item-title {{event.name}}
                .event-item-location {{event.location}}
                .event-item-date {{event.startDate|amDateFormat:'ddd, DD MMM'}} to {{event.endDate|amDateFormat:'ddd, DD MMM'}}
                .event-item-timeago {{event.timeFromNow}}



  // Main section
  .main-content.min-height-100pc(ng-class="{'slide-left': showMobileMenu}")
    .header-logo-container
      img.header-logo(src="assets/images/background_vectorized.png")
      // Mobile navbar button
      .hamburger.small-screen-only(ng-click="showMobileMenu=!showMobileMenu", ng-class="{active: showMobileMenu}")
        .hamburger-line
        .hamburger-line
        .hamburger-line
      // Stave background against header for mobile version
      .stave-background.small-screen-only
        .stave-background-line
        .stave-background-line
        .stave-background-line
        .stave-background-line
        .stave-background-line

    // Full screen navbar
    ul.nav.medium-or-large-screen-only
      li(ng-repeat="section in navSections", ng-if="!section.hideLink" ng-class="{ 'active': isActive('{{section.url}}'), 'small-screen-only': section.smallScreenOnly }")
        //a(href='#{{section.url}}') {{section.title}}
        a(ui-sref="{{section.state}}") {{section.title}}
      .stave-background
        .stave-background-line
        .stave-background-line
        .stave-background-line
        .stave-background-line
        .stave-background-line

    // View content
    .view-content.min-height-100pc
      .min-height-100pc(ui-view="")

  .mobile-menu.small-screen-only
    ul
      li(ng-repeat="section in navSections", ng-if="!section.hideLink" ng-class="{ 'active': isActive('{{section.url}}'), 'small-screen-only': section.smallScreenOnly }")
        //a(href='#{{section.url}}') {{section.title}}
        a(data-ui-sref="{{section.state}}", data-ng-click="showMobileMenu=false")
          span.mobile-nav-icon
            span.mobile-nav-icon-contents >
          span.mobile-nav-text {{section.title}}

